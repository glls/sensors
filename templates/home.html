<!DOCTYPE html>
<html lang="en" x-data="sensorData()">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor Data</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
    <script src="{% static 'js/sensorData.js' %}" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body>

<div class="container mt-4">
    <h1 class="text-center">Sensors</h1>

    <!-- Weather and Air Pollution Data -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">Weather Data</div>
                <div class="card-body">
                    <template x-if="weatherData">
                        <div>
                            <p><strong>Temperature:</strong> <span x-text="weatherData.main.temp"></span> °C</p>
                            <p><strong>Weather:</strong> <span x-text="weatherData.weather[0].description"></span></p>
                            <p><strong>Humidity:</strong> <span x-text="weatherData.main.humidity"></span> %</p>
                            <p><strong>Pressure:</strong> <span x-text="weatherData.main.pressure"></span> hPa</p>
                        </div>
                    </template>
                    <p x-show="!weatherData">Loading weather data...</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">Air Pollution Data</div>
                <div class="card-body">
                    <template x-if="pollutionData">
                        <div>
                            <p><strong>PM2.5:</strong> <span x-text="pollutionData.list[0].components.pm2_5"></span> µg/m³</p>
                            <p><strong>PM10:</strong> <span x-text="pollutionData.list[0].components.pm10"></span> µg/m³</p>
                            <p><strong>CO:</strong> <span x-text="pollutionData.list[0].components.co"></span> µg/m³</p>
                            <p><strong>NO2:</strong> <span x-text="pollutionData.list[0].components.no2"></span> µg/m³</p>
                        </div>
                    </template>
                    <p x-show="!pollutionData">Loading air pollution data...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Card 1: Latest Outdoor Sensor Reading -->
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">Latest Outdoor Sensor Reading</div>
            <div class="card-body">
                <template x-if="outdoorSensor">
                    <div>
                        <p><strong>Sensor ID:</strong> <span x-text="outdoorSensor.sensor_id"></span></p>
                        <p><strong>PM10:</strong> <span x-text="outdoorSensor.pm10"></span> µg/m³</p>
                        <p><strong>PM2.5:</strong> <span x-text="outdoorSensor.pm25"></span> µg/m³</p>
                        <p><strong>Temperature:</strong> <span x-text="outdoorSensor.temperature"></span> °C</p>
                        <p><strong>Humidity:</strong> <span x-text="outdoorSensor.humidity"></span> %</p>
                        <p><strong>Pressure:</strong> <span x-text="outdoorSensor.pressure"></span> hPa</p>
                        <p><strong>Signal:</strong> <span x-text="outdoorSensor.signal"></span> dBm</p>
                        <p><strong>Time:</strong> <span x-text="outdoorSensor.time"></span></p>
                    </div>
                </template>
                <p x-show="!outdoorSensor">No outdoor data available.</p>
            </div>
        </div>
    </div>

    <!-- Card 2: Latest Indoor Sensor Reading -->
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">Latest Indoor Sensor Reading (ens160)</div>
            <div class="card-body">
                <template x-if="indoorSensor">
                    <div>
                        <p><strong>Sensor ID:</strong> <span x-text="indoorSensor.sensor_id"></span></p>
                        <p><strong>AQI:</strong> <span x-text="indoorSensor.aqi"></span></p>
                        <p><strong>TVOC:</strong> <span x-text="indoorSensor.tvoc"></span></p>
                        <p><strong>eCO2:</strong> <span x-text="indoorSensor.eco2"></span></p>
                        <p><strong>Time:</strong> <span x-text="indoorSensor.time"></span></p>
                    </div>
                </template>
                <p x-show="!indoorSensor">No indoor data available.</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Card 3: Latest Temperature Data (Sensor 1) -->
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">Latest Temperature Data (Sensor 1)</div>
            <div class="card-body">
                <template x-if="tempSensor1">
                    <div>
                        <p><strong>Temperature:</strong> <span x-text="tempSensor1.temperature"></span> °C</p>
                        <p><strong>Humidity:</strong> <span x-text="tempSensor1.humidity"></span> %</p>
                        <p><strong>Pressure:</strong> <span x-text="tempSensor1.pressure"></span> hPa</p>
                        <p><strong>Time:</strong> <span x-text="tempSensor1.time"></span></p>
                    </div>
                </template>
                <p x-show="!tempSensor1">No temperature data available for Sensor 1.</p>
            </div>
        </div>
    </div>

    <!-- Card 4: Latest Temperature Data (Sensor 2) -->
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">Latest Temperature Data (Sensor 2)</div>
            <div class="card-body">
                <template x-if="tempSensor2">
                    <div>
                        <p><strong>Temperature:</strong> <span x-text="tempSensor2.temperature"></span> °C</p>
                        <p><strong>Humidity:</strong> <span x-text="tempSensor2.humidity"></span> %</p>
                        <p><strong>Time:</strong> <span x-text="tempSensor2.time"></span></p>
                    </div>
                </template>
                <p x-show="!tempSensor2">No temperature data available for Sensor 2.</p>
            </div>
        </div>
    </div>
</div>

</body>
</html>